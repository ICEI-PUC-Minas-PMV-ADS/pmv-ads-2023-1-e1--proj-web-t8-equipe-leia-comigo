<!DOCTYPE html>
<html lang="pt-br">

<head>
  <meta charset="UTF-8" />
  <link rel="icon" type="img/logo_leia" href="../assets/img/Menu/iconeLeiaComigo.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Leia Comigo</title>
  <link rel="stylesheet" href="../assets/css/styles_footer.css" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
  <script src="../assets/javascript/account.js"></script>
</head>

<body>
  <div class="body">
    <!-- nav -->
    <div id="nav" class="nav">
      <div class="main__menu">
        <img class="nav__logo" src="../assets/img/Menu/logo_leia.png" alt="" />
        <ul class="select_menu">
          <li class="components_li"><a href="../pages/index.html">Inicio</a></li>
          <li class="components_li"><a href="../pages/Books.html">Livros</a></li>
          <li class="components_li"><a href="../pages/Podcasts.html">Podcasts</a></li>
          <li class="components_li"><a href="../pages/Artigos.html">Artigos</a></li>
          <li class="components_li"><a href="../pages/Reviews.html">Reviews</a></li>
        </ul>
      </div>

      <div class="accountGroup">
        <img class="nav__avatar" src="../assets/img/Menu/avatar.png" alt="" onmouseover="handleShowOptions()"
          onmouseout="handleUnshowOptions()" />
        <div class="box" onmouseover="handleShowOptions()" onmouseout="handleUnshowOptions()">
          <div class="options" onclick="handleClickMyAccount()">Minha Conta</div>

          <div class="options" onclick="handleLoadLogin()">Entrar</div>

          <div class="options" onclick="handleLogout()">Sair</div>
        </div>
      </div>
    </div>

    <div id="footer">
      <div class="avisosLegais">
        <h3>Avisos Legais</h3>
        <p>Bem-vindo ao Leia Comigo!

          Ao utilizar este site, você concorda em cumprir os seguintes termos e condições de uso. Por favor, leia atentamente antes de continuar a utilizar o site. Caso você não concorde com algum aspecto destes termos, recomendamos que não utilize o site.</p>
      </div>
    </div>

    <div id="footer">
      <div class="propriedadeIntelectual">
        <h3>Propriedade Intelectual</h3>
        <p>O conteúdo deste site, incluindo textos, imagens, vídeos e logotipos, está protegido por direitos autorais e outras leis de propriedade intelectual. Os conteúdos presentes neste site são de propriedade intelectual livre ou com a informação do devido autor. É proibida a reprodução, distribuição ou utilização não autorizada desse conteúdo, salvo quando expressamente permitido pela legislação aplicável.</p>
        </div>
    </div>

    <div id="footer">
      <div class="termosUso">
        <h3>Uso do Site</h3>
        <p>O site Leia Comigo é destinado exclusivamente ao uso educacional, como parte do projeto desenvolvido pelos alunos da faculdade PUC Minas. O conteúdo disponibilizado no site é composto por livros com direitos autorais livres e vídeos incorporados diretamente do YouTube.</p>
        </div>
    </div>

    <div id="footer">
      <div class="linkTerceiros">
        <h3>Links para Sites de Terceiros</h3>
        <p>O site Leia Comigo contém links para sites de terceiros, como fontes de referência, vídeos incorporados ou outros recursos. Esses links são fornecidos apenas para sua conveniência. Não temos controle sobre o conteúdo, as políticas de privacidade ou as práticas desses sites de terceiros. Recomendamos que você leia os termos e condições e a política de privacidade desses sites antes de utilizá-los.</p>
        </div>
    </div>

    <div id="footer">
      <div class="EntreContato">
        <h3>Entre em contato</h3>
        <p>Telefone: (31) 97162-3368 / (11) 99527-6742</p>
        <p>Email: matheus.silva.1083821@sga.pucminas.br / lbsampaio@sga.pucminas.br</p>
        <p>Endereço: Av. Brasil, 2023 - Funcionários, Belo Horizonte - MG, 30140-002</p>
      </div>
    </div>
  </div>

  <div class="popup">
    <div class="myAccount">
      <div class="closeIcon" onclick="handleCloseMyAccount()">X</div>
      <div class="modalTitle">Informações da conta</div>
      <div class="modalContent">
        <div class="infoBox">
          <div class="personalInfo">
            <label>Usuário: </label>
            <input type="text" class="value" id="nome" disabled />
          </div>

          <div class="personalInfo">
            <label>E-mail:</label>
            <input type="email" class="value" id="gmail" disabled />
          </div>

          <div class="personalInfo">
            <label>Senha:</label>
            <input type="password" class="value" id="senha" disabled>

            </input>
            <img class="eyeOff" src="../assets/img/images/eyeOff.svg" alt="">
          </div>
        </div>

        <img class="profileIcon" src="../assets/img/Menu/avatar.png" alt="">
      </div>
    </div>
  </div>

  <div class="box-form">
    <div class="box-form-login">
      <div class="closeForm" onclick="handleCloseForm()">X</div>

      <h2>Login</h2>
      <form action="#" class="formulario">
        <div class="inputForm">
          <input type="mail" id="lEmail" placeholder="Preencha com seu e-mail" />
        </div>

        <div class="inputForm">
          <input type="password" id="lPassword" placeholder="Senha" />
        </div>
        <button onClick="handleCallLogin()">Entrar</button>
        <div class="registre-se">Ainda não possui uma conta? <span class="register-link"
            onclick="handleLoadRegisterForm()">Registre-se</span></div>
      </form>
    </div>

    <div class="box-form-registrar">
      <div class="closeForm" onclick="handleCloseForm()">X</div>

      <h2>Registrar</h2>
      <form action="#">
        <div class="inputForm">
          <input type="name" id="rName" placeholder="Nome de usuário" />
        </div>

        <div class="inputForm">
          <input type="mail" id="rEmail" placeholder="Preencha com seu e-mail" />
        </div>

        <div class="inputForm">
          <input type="password" id="rPassword" placeholder="Senha" />
        </div>
        <button onclick="handleCallRegister()">Criar conta</button>
        <div class="registre-se">Já possui uma conta? <span class="login-link"
            onclick="handleLoadLoginForm()">Logue</span>
        </div>
      </form>
    </div>
  </div>

  <!-- TOAST BOOSTRAP -->
  <div class="toast-container position-fixed top-0 end-0 p-3">
    <div id="liveToast" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
      <div class="toast-header">
        <img src="../assets/img/images/warningIcon.png" class="rounded me-2" width="30px" height="30px">
        <strong class="me-auto">Aviso</strong>
        <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
      </div>
      <div class="toast-body">

      </div>
    </div>
  </div>

  <script src="../assets/javascript/scripts.js"></script>
  <script>
    // VARIÁVEIS REFERENTES AOS FORMULÁRIOS DA TELA
    const registerLink = document.querySelector('.register-link')
    const loginLink = document.querySelector('.login-link')

    const loginForm = document.querySelector('.box-form-login')
    const registerForm = document.querySelector('.box-form-registrar')
    const formGeral = document.querySelector('.box-form')

    const inputPassword = document.querySelector('#senha')

    // VARIÁVEL PRA CONTROLE DO TOAST
    const toast = document.getElementById('liveToast')
    const toastBody = toast.querySelector('.toast-body')

    const handleClickMyAccount = () => {
      const response = handleLoadMyAccount()

      if (response.error !== 0) {
        toastBody.innerHTML = response.msg
        bootstrap.Toast.getOrCreateInstance(toast).show()
        return
      }
    }

    const clearInputs = () => {
      document.querySelector('#lEmail').value = ''
      document.querySelector('#lPassword').value = ''

      document.querySelector('#rEmail').value = ''
      document.querySelector('#rName').value = ''
      document.querySelector('#rPassword').value = ''
    }

    const handleCallLogin = () => {
      const email = document.querySelector('#lEmail')
      const senha = document.querySelector('#lPassword')

      if (!email.value || !senha.value) {
        toastBody.innerHTML = 'Preencha todos os campos para prosseguir!'
        bootstrap.Toast.getOrCreateInstance(toast).show()
        return
      }
      const response = handleLogin(email.value, senha.value)

      if (response.error !== 0) {
        toastBody.innerHTML = response.msg
        bootstrap.Toast.getOrCreateInstance(toast).show()
        return
      }

      formGeral.style.display = 'none'
      clearInputs()
    }

    const handleCallRegister = () => {
      const email = document.querySelector('#rEmail')
      const name = document.querySelector('#rName')
      const password = document.querySelector('#rPassword')

      if (!email.value || !name.value || !password.value) {
        toastBody.innerHTML = 'Preencha todas as informações para prosseguir!'
        bootstrap.Toast.getOrCreateInstance(toast).show()
        return
      }
      const response = handleRegister(email.value, password.value, name.value)

      if (response.error !== 0) {
        toastBody.innerHTML = response.msg
        bootstrap.Toast.getOrCreateInstance(toast).show()
        return
      }

      formGeral.style.display = 'none'
      registerForm.style.display = 'none'
      loginForm.style.display = 'block'

      clearInputs()
    }

    const handleLoadRegisterForm = () => {
      loginForm.style.display = 'none'
      registerForm.style.display = "inline"

      clearInputs()
    }

    const handleLoadLoginForm = () => {
      loginForm.style.display = 'inline'
      registerForm.style.display = 'none'

      clearInputs()
    }

    const handleCloseForm = () => {
      formGeral.style.display = 'none'
      registerForm.style.display = 'none'
      loginForm.style.display = 'block'

      clearInputs()
    }

    document.querySelector('.eyeOff').addEventListener('click', () => {
      const type = inputPassword.getAttribute('type') == 'password' ? 'text' : 'password'
      inputPassword.setAttribute('type', type)

      const img = document.querySelector('.eyeOff')

      type == 'text'
        ? img.src = '../assets/img/images/eyeOn.svg'
        : img.src = '../assets/img/images/eyeOff.svg'
    })

    document.querySelector('.closeForm').addEventListener('click', () => {
      formGeral.style.display = 'none'
    })

  </script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz"
    crossorigin="anonymous"></script>
</body>
</html>